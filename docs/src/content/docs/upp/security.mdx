---
title: Security Considerations
description: Security guidelines for UPP implementations.
---

import { Aside, Badge, Card, CardGrid } from '@astrojs/starlight/components';

# Security Considerations

<Badge text="UPP-1.3.0" variant="note" />

## API Key Handling

- API keys MUST NOT be logged
- API keys SHOULD NOT appear in error messages
- Implementations SHOULD support secure key storage

## Tool Execution

- Tool arguments MUST be treated as untrusted input
- Implementations MUST NOT validate arguments against schema automatically
- Tool implementations SHOULD validate and sanitize inputs
- Sensitive operations SHOULD use approval handlers

## Content Handling

- Binary data may come from untrusted sources
- Implementations SHOULD validate MIME types
- Large content SHOULD be size-limited

## Network Security

- Implementations SHOULD default to TLS/SSL
- Custom base URLs allow MITM if misconfigured
- Timeout settings prevent resource exhaustion


## Changelog

### 1.3.0

- Reformatted specification for improved clarity and usability
- Updated RFC 2119 compliance with BCP 14 and RFC 8174 references
- Simplified schema definitions to reference JSON Schema directly
- Removed verbose appendix JSON schemas (duplicative of prose definitions)
- Consolidated helper types into single section
- Streamlined conformance requirements into tabular format
- Removed provider implementation guide (to be published as separate document)
- Simplified type constant documentation
- Clarified MUST/SHOULD/MAY usage throughout per RFC 2119/8174
- Reorganized table of contents for logical flow
- Reduced specification length while maintaining semantic completeness

### 1.2.0-draft

- **Added** `Document` helper type (Section 6.6) with factory methods for PDF and text documents
- **Added** `Audio` helper type (Section 6.7) with factory methods for audio content
- **Added** `Video` helper type (Section 6.8) with factory methods for video content
- **Added** `Image.fromBlock()` factory method to create Image from existing ImageBlock
- **Simplified** specification to pure protocol architecture; removed all vendor-specific implementation details including: metadata option tables (6.1, 10.1), system prompt mappings (5.10.4), structured output wiring (11.3), mask conventions (13.6), provider tool reference (10.9.5), embedding params (12.10), image params (13.14), capability matrix (13.14.9), and example model names (1.5)
- **Removed** Image conformance levels for vary/upscale/outpaint (16.1.3) to match interface; renumbered Streaming to Level 3
- **Added** Section 10.9 Provider-Native Tools documenting server-side built-in tools (web search, image generation, code interpreter, etc.)
- **Added** `images`, `audio`, `video` convenience accessors to base Message structure (Section 6.1) to match existing `text` accessor pattern
- **Reformatted** specification to be language-agnostic
- **Replaced** language-specific syntax with pseudocode notation
- **Added** JSON Schema definitions in appendices
- **Added** implementation guidance for multiple programming languages
- **Added** security considerations section
- **Added** HTTP status code mapping table
- **Added** `ImageProviderStreamResult` type definition and export
- **Added** cross-reference note in Section 10.4 linking tool and structured output validation behavior
- **Added** `EmbeddingInputType` enumeration (`document`/`query`) for provider-specific input type hints
- **Added** `MessageOptions` structure definition with constructor signatures for all message types
- **Added** Section 1.7 clarifying package naming conventions and import syntax
- **Fixed** terminology: "fragments" → "events" in Image conformance (Section 16.1.3)
- **Fixed** RFC 2119 compliance: "will throw" → "MUST throw" in Section 11.3
- **Fixed** iterator notation to use language-agnostic `(iterable)` format instead of `[iterator]`
- **Corrected** Section 16.4 capability declaration wording (1.1 incorrectly stated "no explicit capability interface")
- **Updated** example model IDs to use dated format (e.g., `claude-haiku-4-20250514`) for accuracy; this is an example update, not a format requirement
- **Updated** example package name to `upp` as a language-agnostic placeholder (implementations choose their own names)
- **Clarified** provider implementation patterns across language paradigms
- **Clarified** `BinaryBlock` constraint: only valid in `UserContent`, not `AssistantContent`
- **Maintained** semantic compatibility with UPP 1.1 (additive clarifications only, no breaking changes)

### 1.1.0-draft

- **Renamed** from "useAI Provider Protocol" to "Unified Provider Protocol"
- **Renamed** package from `useAI` to `@providerprotocol/ai`
- **Renamed** entry points: `useAI()` → `llm()`, `useEmbedding()` → `embedding()`, `useImage()` → `image()`
- **Added** `ai` namespace export for grouped imports
- **Added** `embedding()` interface for vector embeddings
- **Added** `image()` interface for image generation
- **Added** unified provider factories (single export per provider)
- **Added** `ModelReference` type for portable model references
- **Added** `createProvider()` helper for provider implementations
- **Added** `EmbeddingHandler`, `ImageHandler` interfaces
- **Added** `BoundEmbeddingModel`, `BoundImageModel` types
- **Added** `ImageCapabilities` for runtime feature detection
- **Added** unified `embed()` interface for single, batch, and chunked embedding
- **Added** `EmbeddingStream` for large-scale embedding with progress
- **Added** image editing, variation, and upscaling interfaces
- **Added** `RetryStrategy` interface for pluggable retry/rate-limit handling
- **Replaced** `RetryConfig` with `RetryStrategy` for flexibility
- **Updated** `UPPError` with `modality` field
- **Updated** provider structure to use unified factories
- **Added** Conformance section

### 1.0.0-draft

- Initial draft specification (LLM-focused)