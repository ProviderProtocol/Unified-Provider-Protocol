---
title: Messages
description: Message types and content blocks in UPP.
---

import { Aside, Badge, Card, CardGrid } from '@astrojs/starlight/components';

# Messages

<Badge text="UPP-1.3.0" variant="note" />

## Message Types

**Base Message Structure:**

| Field | Type | Description |
|-------|------|-------------|
| `id` | String | Unique message identifier |
| `type` | MessageType | `user`, `assistant`, or `tool_result` |
| `timestamp` | Timestamp | When created |
| `metadata` | Map? | Provider-namespaced metadata |

**Convenience Accessors** (on all message types):

| Accessor | Type | Description |
|----------|------|-------------|
| `text` | String | Concatenated text blocks |
| `images` | List&lt;ImageBlock&gt; | All image blocks |
| `documents` | List&lt;DocumentBlock&gt; | All document blocks |
| `audio` | List&lt;AudioBlock&gt; | All audio blocks |
| `video` | List&lt;VideoBlock&gt; | All video blocks |

## UserMessage

| Field | Type | Description |
|-------|------|-------------|
| `type` | "user" | Always "user" |
| `content` | List&lt;UserContent&gt; | Content blocks |

`UserContent`: `TextBlock`, `ImageBlock`, `DocumentBlock`, `AudioBlock`, `VideoBlock`, `BinaryBlock`

## AssistantMessage

| Field | Type | Description |
|-------|------|-------------|
| `type` | "assistant" | Always "assistant" |
| `content` | List&lt;AssistantContent&gt; | Content blocks |
| `toolCalls` | List&lt;ToolCall&gt;? | Tool calls requested |
| `hasToolCalls` | Boolean | True if toolCalls is non-empty |

`AssistantContent`: `TextBlock`, `ReasoningBlock`, `ImageBlock`, `AudioBlock`, `VideoBlock`

## ToolResultMessage

| Field | Type | Description |
|-------|------|-------------|
| `type` | "tool_result" | Always "tool_result" |
| `results` | List&lt;ToolResult&gt; | Tool execution results |

## Content Blocks

| Block Type | Fields | Description |
|------------|--------|-------------|
| `TextBlock` | `text: String` | Plain text content |
| `ReasoningBlock` | `text: String` | Model reasoning/thinking |
| `ImageBlock` | `source: ImageSource`, `mimeType: String` | Image content |
| `DocumentBlock` | `source: DocumentSource`, `mimeType: String` | Document content |
| `AudioBlock` | `data: Bytes`, `mimeType: String` | Audio content |
| `VideoBlock` | `data: Bytes`, `mimeType: String` | Video content |
| `BinaryBlock` | `data: Bytes`, `mimeType: String` | Arbitrary binary (UserContent only) |

**ImageSource Variants:** `base64`, `url`, `bytes`

**DocumentSource Variants:** `base64`, `url`, `text`

## Helper Types

Implementations SHOULD provide helper types with factory methods:

**Image:**
- `Image.fromPath(path)` - Create from file path
- `Image.fromUrl(url, mimeType?)` - Create from URL
- `Image.fromBytes(data, mimeType)` - Create from bytes
- `Image.fromBase64(base64, mimeType)` - Create from base64
- `Image.fromBlock(block)` - Create from ImageBlock

**Document:**
- `Document.fromPath(path, title?)` - Create from file path
- `Document.fromUrl(url, title?)` - Create from URL
- `Document.fromBase64(base64, mimeType, title?)` - Create from base64
- `Document.fromText(text, title?)` - Create from plain text

**Audio:**
- `Audio.fromPath(path)` - Create from file path
- `Audio.fromBytes(data, mimeType)` - Create from bytes
- `Audio.fromBase64(base64, mimeType)` - Create from base64

**Video:**
- `Video.fromPath(path)` - Create from file path
- `Video.fromBytes(data, mimeType)` - Create from bytes
- `Video.fromBase64(base64, mimeType)` - Create from base64

## Type Guards

Implementations SHOULD provide type guards:

```
isUserMessage(msg: Message) -> Boolean
isAssistantMessage(msg: Message) -> Boolean
isToolResultMessage(msg: Message) -> Boolean
```