---
title: Streaming
description: Streaming response handling in UPP.
---

import { Aside, Badge, Card, CardGrid } from '@astrojs/starlight/components';

# Streaming

<Badge text="UPP-1.3.0" variant="note" />

## StreamResult

Streaming returns a `StreamResult`:

| Property/Method | Description |
|-----------------|-------------|
| (async iterable) | Yields `StreamEvent` objects |
| `turn` | Promise resolving to complete Turn |
| `abort()` | Abort the stream |

## StreamEvent

| Field | Type | Description |
|-------|------|-------------|
| `type` | StreamEventType | Event type |
| `index` | Integer | Content block index |
| `delta` | EventDelta | Event data |

**StreamEventType Values:**

`text_delta`, `reasoning_delta`, `image_delta`, `audio_delta`, `video_delta`, `tool_call_delta`, `tool_execution_start`, `tool_execution_end`, `message_start`, `message_stop`, `content_block_start`, `content_block_stop`

## Usage

```
stream = claude.stream(history, "Write a haiku.")

for await (event in stream) {
  if (event.type == "text_delta") {
    print(event.delta.text)
  }
}

turn = await stream.turn
```

## Abort Behavior

When aborted during tool execution:
- The abort signal MUST propagate to in-flight tool execution
- Pending tool calls MUST be skipped
- The generation MUST throw `CANCELLED` error